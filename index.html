<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Portal - Salokhiddin Makhmudov</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 25%, #f5f5f5 50%, #f5f5f5 100%);
            background-size: 400% 400%;
            animation: gradientShift 20s ease infinite;
            color: #333;
            position: relative;
            overflow-x: hidden;
        }

        .header {
            background-color: #2e8b57;
            color: white;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            flex-wrap: wrap;
        }

        .name, .id {
            font-size: 2.5rem;
            font-weight: bold;
        }

        .grade-box {
            background-color: white;
            padding: 15px 20px;
            border-radius: 10px;
            color: #2e8b57;
            font-weight: bold;
            font-size: 1rem;
            box-shadow: 0 4px 8px rgba(0,0,0,0.15);
            text-align: right;
            min-width: 180px;
            border: 2px solid #2e8b57;
        }

        .grade-box .grade-title {
            font-size: 1.1rem;
            margin-bottom: 8px;
            color: #2e8b57;
        }

        .grade-box .grade-percentage {
            font-size: 1.8rem;
            font-weight: bold;
            color: #2e8b57;
            margin: 5px 0;
        }

        .grade-box .grade-points {
            font-size: 0.9rem;
            color: #666;
            margin: 3px 0;
        }
        
        .grade-box .available-points {
            font-size: 0.85rem;
            color: #888;
            font-style: italic;
        }

        .container {
            max-width: 1200px;
            margin: 20px auto;
            padding: 20px;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0,0,0,0.05);
        }

        .section-title {
            font-size: 1.8rem;
            color: #2e8b57;
            margin: 30px 0 15px 0;
            padding-bottom: 10px;
            border-bottom: 2px solid #e0e0e0;
        }

        .assignments {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .assignment-card {
            background-color: #f9f9f9;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            cursor: pointer;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            display: flex;
            flex-direction: column;
        }

        .assignment-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .assignment-card h3 {
            margin-top: 0;
            margin-bottom: 10px;
        }

        .assignment-subtitle {
            font-weight: 600;
            color: #666;
            margin-bottom: 15px;
        }

        .script-title {
            font-weight: bold;
            color: #2e8b57;
            font-size: 1.1rem;
            margin: 10px 0;
        }

        .button-container {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-top: auto;
        }

        .action-button {
            background-color: #2e8b57;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
            transition: background-color 0.3s ease;
            text-decoration: none;
            display: inline-block;
            width: 100%;
        }

        .action-button:hover {
            background-color: #3ca370;
        }

        .uncompleted {
            background-color: #fff8e6;
            border: 1px dashed #d4a017;
        }

        .google-folder-container {
            text-align: center;
            margin-top: 50px;
            padding-top: 20px;
            border-top: 1px solid #e0e0e0;
        }

        .google-folder-button {
            background-color: #4285F4;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
            transition: background-color 0.3s ease;
            text-decoration: none;
            display: inline-block;
        }

        .google-folder-button:hover {
            background-color: #3367D6;
        }

        .animated-element {
            width: 100px;
            height: 100px;
            background: linear-gradient(45deg, #2e8b57, #87ceab);
            border-radius: 50%;
            margin: 40px auto;
            animation: pulse 2s infinite alternate;
            box-shadow: 0 0 10px rgba(46, 139, 87, 0.5);
        }

        @keyframes pulse {
            0% {
                transform: scale(1) rotate(0deg);
                box-shadow: 0 0 10px rgba(46, 139, 87, 0.5);
            }
            100% {
                transform: scale(1.1) rotate(360deg);
                box-shadow: 0 0 20px rgba(46, 139, 87, 0.8);
            }
        }

        /* Background Planet Animations */
        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .planet-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
            overflow: hidden;
        }

        .planet {
            position: absolute;
            border-radius: 50%;
            opacity: 0.6;
        }

        .planet1 {
            width: 80px;
            height: 80px;
            background: radial-gradient(circle at 30% 30%, #ff6b6b, #ee5a24);
            top: 10%;
            left: -80px;
            animation: moveAcross 25s linear infinite;
            box-shadow: 0 0 20px rgba(255, 107, 107, 0.3);
        }

        .planet2 {
            width: 60px;
            height: 60px;
            background: radial-gradient(circle at 30% 30%, #74b9ff, #0984e3);
            top: 30%;
            right: -60px;
            animation: moveAcrossReverse 30s linear infinite;
            box-shadow: 0 0 15px rgba(116, 185, 255, 0.3);
        }

        .planet3 {
            width: 70px;
            height: 70px;
            background: radial-gradient(circle at 30% 30%, #fd79a8, #e84393);
            top: 60%;
            left: -70px;
            animation: moveAcross 35s linear infinite;
            box-shadow: 0 0 18px rgba(253, 121, 168, 0.3);
        }

        .planet4 {
            width: 55px;
            height: 55px;
            background: radial-gradient(circle at 30% 30%, #fdcb6e, #e17055);
            top: 80%;
            right: -55px;
            animation: moveAcrossReverse 28s linear infinite;
            box-shadow: 0 0 12px rgba(253, 203, 110, 0.3);
        }

        .planet5 {
            width: 65px;
            height: 65px;
            background: radial-gradient(circle at 30% 30%, #a29bfe, #6c5ce7);
            top: 20%;
            left: -65px;
            animation: moveAcross 40s linear infinite;
            box-shadow: 0 0 16px rgba(162, 155, 254, 0.3);
        }

        .planet6 {
            width: 75px;
            height: 75px;
            background: radial-gradient(circle at 30% 30%, #55efc4, #00b894);
            top: 50%;
            right: -75px;
            animation: moveAcrossReverse 32s linear infinite;
            box-shadow: 0 0 20px rgba(85, 239, 196, 0.3);
        }

        @keyframes moveAcross {
            0% {
                transform: translateX(0) translateY(0) rotate(0deg);
            }
            25% {
                transform: translateX(25vw) translateY(-20px) rotate(90deg);
            }
            50% {
                transform: translateX(50vw) translateY(20px) rotate(180deg);
            }
            75% {
                transform: translateX(75vw) translateY(-10px) rotate(270deg);
            }
            100% {
                transform: translateX(calc(100vw + 80px)) translateY(0) rotate(360deg);
            }
        }

        @keyframes moveAcrossReverse {
            0% {
                transform: translateX(0) translateY(0) rotate(0deg);
            }
            25% {
                transform: translateX(-25vw) translateY(15px) rotate(-90deg);
            }
            50% {
                transform: translateX(-50vw) translateY(-25px) rotate(-180deg);
            }
            75% {
                transform: translateX(-75vw) translateY(10px) rotate(-270deg);
            }
            100% {
                transform: translateX(calc(-100vw - 80px)) translateY(0) rotate(-360deg);
            }
        }

        /* Modal styles for embedded content */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.8);
        }

        .modal-content {
            position: relative;
            background-color: #fefefe;
            margin: 2% auto;
            padding: 0;
            border: none;
            width: 95%;
            height: 90%;
            border-radius: 8px;
            overflow: hidden;
        }

        .modal-header {
            background-color: #2e8b57;
            color: white;
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .close {
            color: white;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            line-height: 1;
        }

        .close:hover {
            opacity: 0.7;
        }

        .modal-iframe {
            width: 100%;
            height: calc(100% - 60px);
            border: none;
        }
    </style>
</head>
<body>
    <!-- Moving Planets Background -->
    <div class="planet-container">
        <div class="planet planet1"></div>
        <div class="planet planet2"></div>
        <div class="planet planet3"></div>
        <div class="planet planet4"></div>
        <div class="planet planet5"></div>
        <div class="planet planet6"></div>
    </div>

    <div class="header">
        <div>
            <div class="name">Salokhiddin Makhmudov</div>
            <div class="id">2417956</div>
        </div>
        <div class="grade-box" id="gradeBox">
            <div class="grade-title">ðŸ“Š Portfolio Grade</div>
            <div class="grade-percentage"><span id="gradePercent">Loading...</span>%</div>
            <div class="grade-points">Earned: <span id="earnedPoints">0</span> / <span id="totalPoints">0</span></div>
            <div class="available-points">Available: <span id="availablePoints">0</span> pts</div>
        </div>
    </div>

    <div class="container">
        <h2 class="section-title">Completed Assignments</h2>
        <div class="assignments">
            <div class="assignment-card">
                <h3>Assignment 1</h3>
                <span class="action-button">Coming Soon</span>
            </div>

            <div class="assignment-card">
                <h3>Assignment 2</h3>
                <div class="assignment-subtitle">CLI Dungeon Crawl</div>
                <div class="button-container">
                    <a href="Assignment2_Dungeon_Report.pdf" target="_blank" class="action-button">Open File</a>
                </div>
            </div>

            <div class="assignment-card">
                <h3>Assignment 3</h3>
                <div class="assignment-subtitle">Virtual Library</div>
                <div class="button-container">
                    <a href="report_week_4.pptx" target="_blank" class="action-button">Open Report</a>
                </div>
            </div>

            <div class="assignment-card">
                <h3>Assignment 4</h3>
                <div class="script-title">Week 7 AP Script</div>
                <div class="button-container">
                    <a href="https://docs.google.com/document/d/1m73vqyvNj2j3SFLPM8BTX0Id8Gst_APQ0dUcTu--Eac/edit?usp=sharing" target="_blank" class="action-button">Open Document</a>
                    <button class="action-button" onclick="openModal('googleSheetModal')">Google Sheet</button>
                </div>
            </div>

            <div class="assignment-card">
                <h3>Assignment 5</h3>
                <div class="assignment-subtitle">Cryptography Project</div>
                <div class="button-container">
                    <a href="https://behruz1262.github.io/encryption-decryption-tool" target="_blank" class="action-button">Cryptography Tool</a>
                    <a href="documentation.html" target="_blank" class="action-button">Documentation</a>
                </div>
            </div>

            <div class="assignment-card">
                <h3>Week 10</h3>
                <div class="assignment-subtitle">Lumen Project</div>
                <div class="button-container">
                    <a href="lumenchat.html" target="_blank" class="action-button">Lumen Chat</a>
                    <a href="LumenReport.html" target="_blank" class="action-button">Lumen Report</a>
                    <button class="action-button" onclick="openModal('chatgptModal')">Lumen Chat ChatGPT</button>
                </div>
            </div>

            <!-- Week 16 Assignment Added -->
            <div class="assignment-card">
                <h3>Week 16</h3>
                <div class="assignment-subtitle">Take a Hike Project</div>
                <div class="button-container">
                    <button class="action-button" onclick="openModal('reportModal')">Report</button>
                    <button class="action-button" onclick="openModal('mapModal')">Map</button>
                </div>
            </div>
        </div>

        <h2 class="section-title">Upcoming Assignments</h2>
        <div class="assignments">
            <div class="assignment-card uncompleted">
                <h3>Week 13</h3>
                <div class="assignment-subtitle">Coming Soon</div>
                <div class="button-container">
                    <span class="action-button" style="background-color: #d4a017;">Not Available</span>
                </div>
            </div>
        </div>

        <div class="google-folder-container">
            <a href="https://drive.google.com/drive/folders/1-HYx9KJq4-fv4tCDuNt8IcESzneLJHLG" target="_blank" class="google-folder-button">
                My Google Folder
            </a>
        </div>

        <div class="animated-element"></div>
    </div>

    <!-- Modal for Report -->
    <div id="reportModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Week 16 - Take a Hike Report</h2>
                <span class="close" onclick="closeModal('reportModal')">&times;</span>
            </div>
            <iframe id="reportFrame" class="modal-iframe" src=""></iframe>
        </div>
    </div>

    <!-- Modal for Map -->
    <div id="mapModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Week 16 - Project Map</h2>
                <span class="close" onclick="closeModal('mapModal')">&times;</span>
            </div>
            <iframe id="mapFrame" class="modal-iframe" src=""></iframe>
        </div>
    </div>

    <!-- Modal for Google Sheet -->
    <div id="googleSheetModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Assignment 4 - Google Sheet</h2>
                <span class="close" onclick="closeModal('googleSheetModal')">&times;</span>
            </div>
            <iframe id="googleSheetFrame" class="modal-iframe" src=""></iframe>
        </div>
    </div>

    <!-- Modal for ChatGPT -->
    <div id="chatgptModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Week 10 - Lumen Chat ChatGPT History</h2>
                <span class="close" onclick="closeModal('chatgptModal')">&times;</span>
            </div>
            <iframe id="chatgptFrame" class="modal-iframe" src=""></iframe>
        </div>
    </div>

    <script>
        document.querySelectorAll('.assignment-card').forEach(card => {
            card.addEventListener('click', function(e) {
                if (e.target !== this && (e.target.tagName === 'A' || e.target.className.includes('action-button') || e.target.tagName === 'BUTTON')) return;
                this.style.backgroundColor = '#e8f5e9';
                setTimeout(() => {
                    this.style.backgroundColor = this.classList.contains('uncompleted') ? '#fff8e6' : '#f9f9f9';
                }, 300);
            });
        });

        // Grade fetch
        fetch("https://script.googleusercontent.com/macros/echo?user_content_key=AehSKLhrY98NFipV4zUNusQD5eQvFLqQYrY0WtOOgI4tVjGFBsW8E9JMh-M6tvfghC9zPNFwXCm5B2eBVMuSDFgdsBHsLpQ7P1NBcKB3xWk1HYhkPZk8N9ldPWD3D6gba1hkgTDJY58q8jlsur-Epzwuh4_QYE8VIkty4yqKUbL7impf8TAP72hneLCf4vg4rx5Db3M6j8aTdJXsW-3MIpI1hUAEJv1iqhySFvUb75fjeW1EYlodRbVYq7Txppr572gqu3O87WAM0g3Ss6ofnf6P8_fGShxUxg&lib=MKDf1LIwpIOGKghFu4P1gM1hwL89NOhPq")
            .then(res => res.json())
            .then(data => {
                document.getElementById("gradePercent").textContent = data.currentPercentage;
                document.getElementById("earnedPoints").textContent = data.earnedPoints;
                document.getElementById("totalPoints").textContent = data.totalPossiblePoints;
                document.getElementById("availablePoints").textContent = data.availablePoints || (data.totalPossiblePoints - data.earnedPoints);
            })
            .catch(() => {
                document.getElementById("gradeBox").innerHTML = "<span style='color:red;'>Grade load failed</span>";
            });

        // Modal functions
        function openModal(modalId) {
            const modal = document.getElementById(modalId);
            modal.style.display = 'block';
            
            if (modalId === 'reportModal') {
                document.getElementById('reportFrame').src = 'https://normanaffleck.github.io/IBM/DI/Take_a_hike.html';
            } else if (modalId === 'mapModal') {
                document.getElementById('mapFrame').src = 'https://drive.google.com/file/d/1lyDnpiJNKUzlQujuFeAIQOAetIH6Kk2Z/preview';
            } else if (modalId === 'googleSheetModal') {
                document.getElementById('googleSheetFrame').src = 'https://docs.google.com/spreadsheets/d/1YfxGJ26F6sPC8jQv6w5bSd4qTrRM_llXPINxp9LJfa0/edit?usp=sharing';
            } else if (modalId === 'chatgptModal') {
                // For ChatGPT shared links, we need to use the embed format
                document.getElementById('chatgptFrame').src = 'https://chatgpt.com/share/68490b6b-1f50-8011-a26f-03f83719a180';
            }
        }

        function closeModal(modalId) {
            const modal = document.getElementById(modalId);
            modal.style.display = 'none';
            
            // Clear iframe src to stop loading
            if (modalId === 'reportModal') {
                document.getElementById('reportFrame').src = '';
            } else if (modalId === 'mapModal') {
                document.getElementById('mapFrame').src = '';
            } else if (modalId === 'googleSheetModal') {
                document.getElementById('googleSheetFrame').src = '';
            } else if (modalId === 'chatgptModal') {
                document.getElementById('chatgptFrame').src = '';
            }
        }

        // Close modal when clicking outside of it
        window.onclick = function(event) {
            const reportModal = document.getElementById('reportModal');
            const mapModal = document.getElementById('mapModal');
            const googleSheetModal = document.getElementById('googleSheetModal');
            const chatgptModal = document.getElementById('chatgptModal');
            
            if (event.target === reportModal) {
                closeModal('reportModal');
            } else if (event.target === mapModal) {
                closeModal('mapModal');
            } else if (event.target === googleSheetModal) {
                closeModal('googleSheetModal');
            } else if (event.target === chatgptModal) {
                closeModal('chatgptModal');
            }
        }

        // Close modal with Escape key
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                closeModal('reportModal');
                closeModal('mapModal');
                closeModal('googleSheetModal');
                closeModal('chatgptModal');
            }
        });
    </script>
</body>
</html>
